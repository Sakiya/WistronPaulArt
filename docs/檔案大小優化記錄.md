# 檔案大小優化記錄

## 日期
2025年1月

## 優化目標
減少 `in_search_of_light` 專案大小，以符合 Azure Static Web Apps 的 262MB 限制。

## 優化內容

### 1. 移除 WEBP 格式圖片
- **刪除檔案數量**：48 個 WEBP 檔案
- **節省空間**：約 14MB
- **變更檔案**：
  - `index.html`：移除所有 `<source srcset="...webp">` 標籤（28 處）
  - `js/main.js`：移除 webp 動態替換邏輯（2 處）

### 2. 改用 Google Fonts 遠端資源
- **刪除檔案**：2 個字型檔案（NotoSans.woff2, NotoSansTC.woff2）
- **節省空間**：約 6MB
- **變更檔案**：
  - `index.html`：加入 Google Fonts 連結（包含 preconnect 優化）
  - `scss/themes/_themes.scss`：移除本地 @font-face 定義

## 優化結果

| 項目 | 優化前 | 優化後 | 減少 |
|------|--------|--------|------|
| WEBP 圖片 | 48 個檔案 | 0 個檔案 | 14MB |
| 字型檔案 | 2 個檔案（6MB） | 0 個檔案 | 6MB |
| **專案總大小** | **153MB** | **133MB** | **20MB** |

## 優點

1. **減少檔案大小**：總共減少約 20MB
2. **使用 CDN**：Google Fonts 提供 CDN，載入速度更快
3. **自動更新**：Google Fonts 會自動提供最新版本
4. **快取優化**：瀏覽器可能已快取 Google Fonts，減少重複下載

## 技術細節

### Google Fonts 設定
```html
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+TC:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
```

### 移除的檔案類型
- `*.webp`：所有 WebP 格式圖片
- `images/font/*.woff2`：本地字型檔案

## 注意事項

1. 網站需要網路連線才能載入 Google Fonts
2. 如果 Google Fonts 無法載入，瀏覽器會使用 fallback 字型（Arial, Helvetica 等）
3. 所有變更都在 `remove-webp-images` 分支中完成，已合併回 `main` 分支

## 後續建議

如果還需要進一步優化，可以考慮：
1. 壓縮 PNG 圖片檔案
2. 優化音訊檔案品質
3. 使用 CDN 存放大型資源
