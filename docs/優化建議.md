# Azure Static Web Apps 大小優化建議

## 問題
- 目前專案大小：**170MB**
- Azure Static Web Apps 限制：**262MB**
- 接近限制，需要優化

## 優化方案

### 1. 字體檔案優化（可節省約 14MB）

**目前狀況：**
- `NotoSans.ttf`: 11MB
- `NotoSans.woff`: 3.9MB
- `NotoSansTC.ttf`: 11MB
- `NotoSansTC.woff`: 3.9MB
- **總計：約 29MB**

**優化建議：**
- 只保留 `woff2` 格式（現代瀏覽器都支援）
- 移除 `ttf` 和 `woff` 格式
- **可節省約 14MB**

**步驟：**
1. 修改 `scss/themes/_themes.scss`，移除 ttf 和 woff 的引用
2. 刪除 `images/font/` 中的 `.ttf` 和 `.woff` 檔案

### 2. 圖片優化（可節省約 20-30MB）

**目前狀況：**
- 作品圖片：54MB
- popup 圖片：21MB
- **總計：約 75MB**

**優化建議：**
- 檢查是否有大於 2MB 的 PNG 檔案（如 `008-1.png` 13MB）
- 將大 PNG 轉換為 WebP 格式
- 壓縮現有 PNG 檔案

**工具：**
- 使用 `imagemagick` 或線上工具壓縮
- 使用 `cwebp` 轉換為 WebP

### 3. 音訊檔案優化（可節省約 20-30MB）

**目前狀況：**
- 中英文音訊各 10 個，共 20 個檔案
- **總計：約 67MB**

**優化建議：**
- 降低音訊品質（從 128kbps 降至 96kbps 或 64kbps）
- 使用更高效的編碼格式
- 或考慮使用外部 CDN 存放音訊檔案

**工具：**
- 使用 `ffmpeg` 壓縮音訊檔案

### 4. 使用 .gitignore 排除不必要的檔案

確保以下檔案不會被上傳：
- `.DS_Store`
- `node_modules/`
- 編譯產生的臨時檔案

### 5. 考慮使用 CDN

對於大型資源（音訊、圖片），可以考慮：
- 使用 Azure Blob Storage + CDN
- 使用 GitHub Releases 存放大型檔案
- 使用外部 CDN 服務

## 預期效果

| 優化項目 | 節省空間 | 優先級 |
|---------|---------|--------|
| 字體檔案 | ~14MB | 高 |
| 圖片壓縮 | ~20-30MB | 高 |
| 音訊壓縮 | ~20-30MB | 中 |
| **總計** | **~54-74MB** | - |

優化後預期大小：**96-116MB**（遠低於 262MB 限制）

## 立即執行步驟

### 步驟 1：優化字體檔案（最快見效）

1. 修改 `scss/themes/_themes.scss`：
```scss
@font-face {
    font-family: 'Noto Sans';
    src: url(../images/font/NotoSans.woff2) format('woff2');
}

@font-face {
    font-family: 'Noto Sans TC';
    src: url(../images/font/NotoSansTC.woff2) format('woff2');
}
```

2. 刪除字體檔案：
```bash
rm in_search_of_light/images/font/NotoSans.ttf
rm in_search_of_light/images/font/NotoSans.woff
rm in_search_of_light/images/font/NotoSansTC.ttf
rm in_search_of_light/images/font/NotoSansTC.woff
```

### 步驟 2：壓縮大圖片

檢查並壓縮大於 2MB 的圖片檔案。

### 步驟 3：壓縮音訊檔案（可選）

如果需要進一步優化，可以壓縮音訊檔案。
